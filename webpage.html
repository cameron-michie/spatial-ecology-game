<!DOCTYPE html>
<html>
<head>
    <title>Ably Realtime Image Display</title>
    <script src="https://cdn.ably.io/lib/ably.min-1.js"></script> <!-- Ably library -->
</head>
<style> 
    .bigger-image{
        width:700px; 
        image-resolution:500dpi;
        image-rendering: pixelated;
        } 
</style>
<body>
    <h1>Ably Realtime Image Display</h1>
    <img id="imageDisplay" alt="Realtime Image" class="bigger-image" />
    <p id="message-count"> Message count = 0</p>

    <script>
        // Initialize Ably
        const ably = new Ably.Realtime('EKxBlQ.bVI3ng:10FVabjayrOT2uTY46zlgR1_DLLDWtqvGbLVaLy_BS8');

        // Subscribe to a channel
        const channel = ably.channels.get('spatial-ecology-game');

        // Subscribe to messages
        messageCounter=0;

        channel.subscribe('image-message', (message) => {
                displayImage(message.data);
                messageCounter++;
                document.getElementById("message-count").innerHTML = "Message count = " + messageCounter;
        });

        // Function to display image
        function displayImage(base64String) {
            var imgSrc = 'data:image/png;base64,' + base64String;
            document.getElementById('imageDisplay').src = imgSrc;
        }

    </script>
</body>
</html>
